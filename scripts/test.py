import requests
from requests.packages.urllib3.connectionpool import HTTPConnectionPool


def _make_request(self, conn, method, url, **kwargs):
    response = self._old_make_request(conn, method, url, **kwargs)
    sock = getattr(conn, "sock", False)
    if sock:
        setattr(response, "peer", sock.getpeername())
    else:
        setattr(response, "peer", None)
    return response


HTTPConnectionPool._old_make_request = HTTPConnectionPool._make_request
HTTPConnectionPool._make_request = _make_request


r = requests.get("http://www.google.com")
print(r.raw._original_response.peer)
